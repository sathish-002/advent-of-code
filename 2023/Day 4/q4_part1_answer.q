q)
q)input:read0 `:q4input.txt
q)input
"Card   1: 36 15 12 91 47 98 59 46 83 86 | 86 34 88  7 36 82 90 32 83 56 27 45 49 69 91 47 98 59 13 15 68 12 17 11 46"
"Card   2: 55 82  6 50 62  4 21 96 14 39 | 11 34 14 52  7 28 13 81 10 98 88 48 21 22 96  1 93 83 85 60 76 87 57 56 62"
"Card   3: 11 88 40  9  7 37 92 15 70 53 | 55 37 97 22 77 34 83 98  1 92 38  5 69 54 25 73 13 94 62 96 78 93 75 23 31"
"Card   4: 83 15  5  4  3 92 86  2 91 58 | 58  2 77 32 93 64 37 82 47 28 13 89 16 24 59 76 52 50 55 15 14 68 61 91 98"
"Card   5: 59 25  2 83 13 26 39 45 28 74 | 29 46 37 81 25 39  4  1  2 64 52 70 57 32 62 95 74  7 33 78 59 92 56  3 26"
...


q)
q)
q)function:{[input] 
				{sp:last ":" vs x; 
				nc:count ("I"$((" " vs trim first "|" vs sp)except enlist "")) inter ("I"$((" " vs trim last "|" vs sp)except enlist "")); 
				tol,:$[nc=0i;0f;nc=1i;1f;nc>=2i;2 xexp (nc-1)]
				} each input; 
				sum tol
			}
q)
q)
q)function input

